{"version":3,"sources":["pages/collection/BoxCollection.js"],"names":["BoxCollection","inject","observer","state","commodityList","page","pageSize","hasMore","copyValue","getCommoditylist","_callee","_this2$state","userM4DStore","C_Users_15691_Desktop_gzxProject_oem_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","wrap","_context","prev","next","Object","C_Users_15691_Desktop_gzxProject_oem_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_10__","_this2","props","getUserStatus","CommodityApi","row","box_id","getQueryString","open_id","openid","then","res","status","arr","data","length","push","apply","C_Users_15691_Desktop_gzxProject_oem_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","setState","antd_mobile_lib_toast__WEBPACK_IMPORTED_MODULE_4___default","info","msg","stop","_this$props","this","history","C_Users_15691_Desktop_gzxProject_oem_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__","localeStore","locale","window","onresize","_this$state","react__WEBPACK_IMPORTED_MODULE_12___default","createElement","id","style","opacity","position","top","readOnly","value","_components_partial_AccountHeader__WEBPACK_IMPORTED_MODULE_18__","className","react_infinite_scroll_component__WEBPACK_IMPORTED_MODULE_19___default","dataLength","loader","endMessage","textAlign","color","map","item","index","key","onClick","src","pFace","pName","fCount","_components_common_NoData__WEBPACK_IMPORTED_MODULE_20__","Component"],"mappings":"yTAqBMA,EAHLC,YAAO,kBACPA,YAAO,iBACPC,yNAECC,MAAQ,CACNC,cAAe,GACfC,KAAM,EACNC,SAAU,GACVC,SAAS,EACTC,UAAW,MAmBbC,sCAAmB,SAAAC,IAAA,IAAAC,EAAAN,EAAAC,EAAAF,EAAAQ,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAC,OAAAC,EAAA,EAAAD,CAAAE,GAAAV,EAEyBU,EAAKlB,MAAvCE,EAFSM,EAETN,KAAMC,EAFGK,EAEHL,SAAUF,EAFPO,EAEOP,cAChBQ,EAAiBS,EAAKC,MAAtBV,aAHSI,EAAAE,KAAA,EAIXN,EAAaW,gBAJF,OAKjBC,IAAapB,cAAc,CACzBC,KAAMA,EACNoB,IAAKnB,EACLoB,OAAOC,YAAe,MACtBC,QAAShB,EAAaiB,SACrBC,KAAK,SAACC,GACP,GAAmB,IAAfA,EAAIC,OAAR,CAIA,IAAMC,EAAMF,EAAIG,KACV3B,EAAU0B,EAAIE,SAAW7B,EAC/BF,EAAcgC,KAAdC,MAAAjC,EAAae,OAAAmB,EAAA,EAAAnB,CAASc,IACtBZ,EAAKkB,SAAS,CAAEnC,gBAAeG,UAASF,KAAME,EAAUF,EAAO,EAAI,SANjEmC,EAAA1B,EAAM2B,KAAKV,EAAIW,OAZF,wBAAA1B,EAAA2B,SAAAjC,yFAfjB,IADkBkC,EAEgBC,KAAKvB,MAA/BV,EAFUgC,EAEVhC,aAFUgC,EAEIE,QAFJ3B,OAAA4B,EAAA,EAAA5B,CAOd0B,KAAKvB,MAHP0B,YACEC,QAIJrC,EAAaW,gBACbsB,KAAKpC,mBAAmBqB,sDAIxBoB,OAAOC,SAAW,sCAwBX,IACCL,EAAYD,KAAKvB,MAAjBwB,QADDM,EAEuCP,KAAK1C,MAA3CC,EAFDgD,EAEChD,cAAeG,EAFhB6C,EAEgB7C,QAASC,EAFzB4C,EAEyB5C,UAOhC,OATOW,OAAA4B,EAAA,EAAA5B,CAOH0B,KAAKvB,MAHP0B,YACEC,QAKFI,EAAAvC,EAAAwC,cAAA,OAAKC,GAAG,iBACNF,EAAAvC,EAAAwC,cAAA,YACEE,MAAO,CAAEC,QAAS,IAAKC,SAAU,QAASC,IAAK,WAC/CC,UAAQ,EACRL,GAAG,WACHM,MAAOrD,IAET6C,EAAAvC,EAAAwC,cAACQ,EAAA,EAAD,MACAT,EAAAvC,EAAAwC,cAAA,OAAKS,UAAU,YAAf,4BAEAV,EAAAvC,EAAAwC,cAACU,EAAAlD,EAAD,CACEmD,WAAY7D,EAAc+B,OAC1BjB,KAAM2B,KAAKpC,iBACXF,QAASA,EACT2D,OAAQb,EAAAvC,EAAAwC,cAAA,KAAGS,UAAU,WAAW,IAChCI,WACEd,EAAAvC,EAAAwC,cAAA,KAAGE,MAAO,CAAEY,UAAW,SAAUC,MAAO,UACrCjE,EAAc+B,OAAc,MAIjCkB,EAAAvC,EAAAwC,cAAA,MAAIS,UAAU,WAEX3D,EAAc+B,OAAS,GACtB/B,EAAckE,IAAI,SAACC,EAAMC,GACvB,OAEInB,EAAAvC,EAAAwC,cAAA,MACEmB,IAAKF,EAAKhB,GACVmB,QAAS,WACP5B,EAAQV,KAAK,wBAA0BmC,EAAKhB,MAG9CF,EAAAvC,EAAAwC,cAAA,OAAKS,UAAU,WACbV,EAAAvC,EAAAwC,cAAA,OAAKqB,IAAKJ,EAAKK,SAGjBvB,EAAAvC,EAAAwC,cAAA,UAAKiB,EAAKM,OACVxB,EAAAvC,EAAAwC,cAAA,iCAAUiB,EAAKO,UAEdzB,EAAAvC,EAAAwC,cAACyB,EAAA,EAAD,kBAjGKC,yBA2GbhF","file":"static/js/88.a89629f3.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Button, Toast } from \"antd-mobile\";\r\nimport { inject, observer } from \"mobx-react\";\r\nimport Cookies from \"js-cookie\";\r\nimport { CommodityApi } from \"../../api\";\r\n// import CopyIcon from '../../assets/images/imeta/fuzhi.png'\r\n\r\nimport {\r\n  getQueryString,\r\n} from \"../../utils/format\";\r\n// import { REG, TOAST_DURATION, COUNT_DOWN } from '../../utils/constants'\r\n// import { isEmail, isMobile } from \"../../utils/reg\"\r\n// import { compatibleFixedButton, getQueryParam } from '../../utils/common'\r\nimport \"./AllCollection.scss\";\r\nimport AccountHeader from \"../../components/partial/AccountHeader\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport NoData from \"../../components/common/NoData\";\r\n\r\n@inject(\"userM4DStore\")\r\n@inject(\"localeStore\")\r\n@observer\r\nclass BoxCollection extends Component {\r\n  state = {\r\n    commodityList: [],\r\n    page: 1, //当前页码\r\n    pageSize: 20, //每页条数\r\n    hasMore: false,\r\n    copyValue: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    let _this = this;\r\n    const { userM4DStore, history } = this.props;\r\n    const {\r\n      localeStore: {\r\n        locale: {},\r\n      },\r\n    } = this.props;\r\n\r\n    userM4DStore.getUserStatus();\r\n    this.getCommoditylist().then();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.onresize = null;\r\n  }\r\n  getCommoditylist = async () => {\r\n    let _this = this;\r\n    const { page, pageSize, commodityList } = this.state;\r\n    const { userM4DStore } = this.props;\r\n    await userM4DStore.getUserStatus();\r\n    CommodityApi.commodityList({\r\n      page: page,\r\n      row: pageSize,\r\n      box_id:getQueryString(\"id\"),\r\n      open_id: userM4DStore.openid,\r\n    }).then((res) => {\r\n      if (res.status !== 1) {\r\n        Toast.info(res.msg);\r\n        return;\r\n      }\r\n      const arr = res.data;\r\n      const hasMore = arr.length === pageSize;\r\n      commodityList.push(...arr);\r\n      this.setState({ commodityList, hasMore, page: hasMore ? page + 1 : 1 });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { history } = this.props;\r\n    const { commodityList, hasMore, copyValue } = this.state;\r\n    const {\r\n      localeStore: {\r\n        locale: {},\r\n      },\r\n    } = this.props;\r\n\r\n    return (\r\n      <div id=\"AllCollection\">\r\n        <textarea\r\n          style={{ opacity: \"0\", position: \"fixed\", top: \"-1000px\" }}\r\n          readOnly\r\n          id=\"textCopy\"\r\n          value={copyValue}\r\n        ></textarea>\r\n        <AccountHeader />\r\n        <div className=\"it_title\">全部藏品</div>\r\n        {/*流水 */}\r\n        <InfiniteScroll\r\n          dataLength={commodityList.length} //This is important field to render the next data\r\n          next={this.getCommoditylist}\r\n          hasMore={hasMore}\r\n          loader={<p className=\"loading\">{\"\"}</p>}\r\n          endMessage={\r\n            <p style={{ textAlign: \"center\", color: \"#ccc\" }}>\r\n              {commodityList.length <= 0 ? \"\" : \"\"}\r\n            </p>\r\n          }\r\n        >\r\n          <ul className=\"sp_list\">\r\n            {/* <li onClick={()=>{history.push('/Buy️Collection')}}> */}\r\n            {commodityList.length > 0 &&\r\n              commodityList.map((item, index) => {\r\n                return (\r\n                  (\r\n                    <li\r\n                      key={item.id}\r\n                      onClick={() => {\r\n                        history.push(\"/CollectionDetail?id=\" + item.id);\r\n                      }}\r\n                    >\r\n                      <div className=\"img_box\">\r\n                        <img src={item.pFace} />\r\n                      </div>\r\n\r\n                      <h2>{item.pName}</h2>\r\n                      <span>总量：{item.fCount}</span>\r\n                    </li>\r\n                  ) || <NoData />\r\n                );\r\n              })}\r\n          </ul>\r\n        </InfiniteScroll>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BoxCollection;\r\n"],"sourceRoot":""}