(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{310:function(e,t,a){},470:function(e,t,a){"use strict";a.r(t);a(112);var n,o=a(72),s=a.n(o),c=a(204),r=a.n(c),i=(a(70),a(36)),u=a.n(i),l=a(205),p=a(0),m=a(7),d=a(8),S=a(28),f=a(27),h=a(71),b=a(29),E=a(1),w=a.n(E),C=a(33),v=(a(9),a(18)),y=a(13),g=a(78),O=a(214),N=a.n(O),x=a(215),A=a.n(x),k=(a(219),a(237)),D=a.n(k),G=a(238),R=a.n(G),I=a(220),T=a.n(I),_=(a(239),a(244)),j=a.n(_),P=(a(310),a(193)),M=Object(C.b)("userM4DStore")(n=Object(C.b)("localeStore")(n=Object(C.c)(n=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={account_token:"",step:1,agree:!1,nickname:"",preAccount:"",account:"",code:"",imgCode:"",password:"",passwordConfirm:"",recommendCode:"",showCaptchaPng:!1,pwType:"password",pwConfirmType:"password",imgSrc:"",captcha:void 0,captchaKey:+new Date,count:y.c,isGetSms:!0,showBtn:!0,isSubmit:!0,isSuccessToast:!1,usertype:"email",tel_num:"",canGetCode:!0},a.canSubmit=function(){var e=a.state,t=e.account,n=e.code,o=e.password,s=e.passwordConfirm;return!!(t&&n&&o&&s)},a.onInputChange=function(e,t){var n=e.target.value;a.setState(Object(p.a)({},t,n))},a.codeCountDown=function(){var e=a.state.count;a.timer=setInterval(function(){e<=0?(a.setState({isGetSms:!0,count:y.c}),a.setState({canGetCode:!0}),clearInterval(a.timer)):a.setState({isGetSms:!1,count:e--})},1e3)},a.getCode=Object(l.a)(r.a.mark(function e(){var t,n,o,s,c,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.userM4DStore,a.props.localeStore.locale.REGISTER,n=Object(h.a)(a),o=a.state,s=o.canGetCode,c=o.account,o.captcha,o.imgCode,i=o.usertype,e.next=6,n.setState({canGetCode:!1});case 6:if(s){e.next=8;break}return e.abrupt("return");case 8:if("phone"!==i){e.next=13;break}if(Object(g.c)(c)){e.next=13;break}return u.a.info("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7",1),n.setState({canGetCode:!0}),e.abrupt("return");case 13:if("email"!==i){e.next=18;break}if(Object(g.a)(c)){e.next=18;break}return u.a.info("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1",1),n.setState({canGetCode:!0}),e.abrupt("return");case 18:t.getCode({account:c,type:"editpaypassword"}).then(function(e){if(1!==e.status)return u.a.info(e.msg),void n.setState({canGetCode:!0});a.codeCountDown()});case 19:case"end":return e.stop()}},e)})),a.onSetType=function(e,t){var n="password"===e?"text":"password";a.setState(Object(p.a)({},t,n))},a.onSubmit=function(){var e=a.props,t=e.userM4DStore,n=e.history,o=(e.userInfo,a.props.localeStore.locale.REGISTER),s=a.state,c=s.account,r=s.code,i=s.password,l=s.passwordConfirm,p=s.usertype;y.d.EMAIL.test(c)||y.d.MOBILE.test(c)?y.d.PASSWORD.test(i)?i===l?(a.setState({isSubmit:!1}),v.c.editPaypassword({open_id:t.openid,phone:"phone"===p&&c||"",email:"email"===p&&c||"",usertype:p,code:r,password:i,passwordConfirm:l}).then(function(e){if(a.setState({isSubmit:!0}),1!==e.status)return u.a.info(e.msg,2),void a.setState({isSubmit:!0,code:""});u.a.info("\u4fee\u6539\u6210\u529f",2,function(){n.push("/mineList")})}).catch(function(){return a.setState({isSubmit:!0})})):u.a.info(o.PASSWORD_NOSAME,2):u.a.info(o.PASSWORD_LEAST,2):u.a.info(o.NUM_ERROR,2)},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=(t.history,t.userM4DStore);a.getUserStatus(),a.getUserInfo({open_id:a.openid}).then(function(t){1===t.status?e.setState({userInfo:t.data,account:t.data.phone||t.data.email||"error",usertype:t.data.phone?"phone":"email"}):u.a.info(t.msg,2)})}},{key:"componentWillUnmount",value:function(){window.onresize=null}},{key:"render",value:function(){var e=this,t=(this.props.history,this.props.localeStore.locale),a=t.REGISTER,n=t.OTCPASSWORD,o=this.state,c=o.account,r=o.code,i=o.password,u=o.passwordConfirm,l=o.pwType,p=o.pwConfirmType,m=o.count,d=o.isGetSms,S=o.isSubmit,f=o.canGetCode,h=o.usertype;return w.a.createElement("div",{id:"otc-password"},w.a.createElement(P.a,null),w.a.createElement("div",{className:"log_head"},w.a.createElement("h1",null,n.MODIFY_PAY_PASSWORD)),w.a.createElement("div",{className:"out_box"},w.a.createElement("div",{className:"main-content"},w.a.createElement("label",null,w.a.createElement("div",{className:"input-box"},w.a.createElement("img",{className:"icon-img",src:"phone"===h&&R.a||j.a}),w.a.createElement("input",{className:"input-main",type:"text",value:c,placeholder:"\u624b\u673a\u53f7",readOnly:!0}))),w.a.createElement("label",null,w.a.createElement("div",{className:"input-box"},w.a.createElement("img",{className:"icon-img",src:D.a}),w.a.createElement("input",{className:"input-main",type:"text",maxLength:6,placeholder:n.PLEASE_YZM,value:r,onChange:function(t){return e.onInputChange(t,"code")}})),w.a.createElement("span",{style:!f&&d&&{opacity:".5"}||{},className:"sms-code  ".concat(d?"":"event-none"),onClick:this.getCode},d?n.HQ_YANZHENGMA:w.a.createElement("span",null,"".concat(m,"s")))),w.a.createElement("label",null,w.a.createElement("div",{className:"input-box"},w.a.createElement("img",{className:"icon-img",src:T.a}),w.a.createElement("input",{className:"input-main",type:l,value:i,placeholder:a.PLEASE_PASSWORD,onChange:function(t){return e.onInputChange(t,"password")}})),w.a.createElement("img",{className:"eye-img",src:"text"===l?N.a:A.a,alt:"\u7741\u773c\u95ed\u773c",onClick:function(){return e.onSetType(l,"pwType")}})),w.a.createElement("label",null,w.a.createElement("div",{className:"input-box"},w.a.createElement("img",{className:"icon-img",src:T.a}),w.a.createElement("input",{className:"input-main",type:p,value:u,placeholder:a.PLEASE_PASSWORD2,onChange:function(t){return e.onInputChange(t,"passwordConfirm")}})),w.a.createElement("img",{className:"eye-img",src:"text"===p?N.a:A.a,alt:"\u7741\u773c\u95ed\u773c",onClick:function(){return e.onSetType(p,"pwConfirmType")}}))),w.a.createElement("div",{className:"btn-box"},w.a.createElement(s.a,{activeClassName:"active",className:"primary-button",disabled:!this.canSubmit()||!S,onClick:this.onSubmit},n.OK))))}}]),t}(E.Component))||n)||n)||n;t.default=M}}]);
//# sourceMappingURL=79.34c7bae9.chunk.js.map