(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{251:function(e,t,a){},466:function(e,t,a){"use strict";a.r(t);a(112);var n,c=a(72),o=a.n(c),r=a(204),s=a.n(r),i=a(205),l=(a(70),a(36)),u=a.n(l),m=a(0),p=a(7),d=a(8),E=a(28),S=a(27),h=a(71),b=a(29),f=a(1),g=a.n(f),v=a(33),C=(a(9),a(18),a(13)),N=a(78),w=(a(20),a(214)),y=a.n(w),G=a(215),O=a.n(G),k=a(219),A=a.n(k),_=a(237),R=a.n(_),I=a(238),x=a.n(I),T=a(220),j=a.n(T),H=a(239),M=a.n(H),P=a(244),D=a.n(P),L=(a(251),a(193)),B=Object(v.b)("userM4DStore")(n=Object(v.b)("localeStore")(n=Object(v.c)(n=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(c)))).state={regtype:"phone",account_token:"",nickname:"",preAccount:"",account:"",code:"",imgCode:"",password:"",passwordConfirm:"",recommendCode:"",showCaptchaPng:!1,pwType:"password",pwConfirmType:"password",imgSrc:"",captcha:void 0,captchaKey:+new Date,count:C.c,isGetSms:!0,showBtn:!0,isSubmit:!0,isSuccessToast:!1,canGetCode:!0},a.canSubmit=function(){var e=a.state,t=e.account,n=e.code,c=e.password,o=(e.passwordConfirm,e.nickname);return!!(t&&n&&c&&o)},a.onInputChange=function(e,t){var n=e.target.value;a.setState(Object(m.a)({},t,n))},a.onAccountBlur=function(e){var t=Object(h.a)(a),n=e.target.value,c=a.state,o=(c.canGetCode,c.preAccount),r=c.account,s=c.regtype,i=a.props.localeStore.locale.REGISTER;return n!==o&&a.setState({preAccount:n}),"phone"!==s||Object(N.c)(r)?"email"!==s||Object(N.a)(r)?void 0:(u.a.info(i.PLEASE_RIGHT_EMAIL,1),void t.setState({canGetCode:!0})):(u.a.info(i.PLEASE_RIGHT_PHONE,1),void t.setState({canGetCode:!0}))},a.onNickBlur=function(e){a.props.localeStore.locale.REGISTER,Object(h.a)(a);var t=e.target.value;Object(N.d)(t)||a.setState({nickname:""},function(){u.a.info("\u6635\u79f0\u4e0d\u89c4\u8303",2)})},a.codeCountDown=function(){var e=a.state.count;a.timer=setInterval(function(){e<=0?(a.setState({isGetSms:!0,count:C.c}),a.setState({canGetCode:!0}),clearInterval(a.timer)):a.setState({isGetSms:!1,count:e--})},1e3)},a.getCode=Object(i.a)(s.a.mark(function e(){var t,n,c,o,r,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.userM4DStore,n=a.props.localeStore.locale.REGISTER,c=Object(h.a)(a),o=a.state,r=o.canGetCode,i=o.account,o.captcha,o.imgCode,l=o.regtype,e.next=6,c.setState({canGetCode:!1});case 6:if(r){e.next=8;break}return e.abrupt("return");case 8:if("phone"!==l){e.next=13;break}if(Object(N.c)(i)){e.next=13;break}return u.a.info(n.PLEASE_RIGHT_PHONE,1),c.setState({canGetCode:!0}),e.abrupt("return");case 13:if("email"!==l){e.next=18;break}if(Object(N.a)(i)){e.next=18;break}return u.a.info(n.PLEASE_RIGHT_EMAIL,1),c.setState({canGetCode:!0}),e.abrupt("return");case 18:t.getCode({account:i,type:"reg"}).then(function(e){if(1!==e.status)return u.a.info(e.msg),void c.setState({canGetCode:!0});a.codeCountDown()});case 19:case"end":return e.stop()}},e)})),a.onSetType=function(e,t){var n="password"===e?"text":"password";a.setState(Object(m.a)({},t,n))},a.onSubmit=function(){var e=a.props,t=e.userM4DStore,n=e.history,c=a.props.localeStore.locale.REGISTER,o=a.state,r=o.account,s=o.code,i=o.password,l=(o.passwordConfirm,o.nickname),m=o.recommendCode,p=o.regtype;C.d.PASSWORD.test(i)?(a.setState({isSubmit:!1}),t.register({usertype:p,email:Object(N.a)(r)?r:null,phone:Object(N.c)(r)?r:null,code:s,password:i,recommend_code:m,user_name:l}).then(function(e){if(a.setState({isSubmit:!0}),1!==e.status)return u.a.info(e.msg,2),void a.setState({isSubmit:!0,code:"",captcha:""});u.a.info(c.REGISTER_SUCESS,2,function(){n.push("/login")})}).catch(function(){return a.setState({isSubmit:!0})})):u.a.info(c.PASSWORD_LEAST,2)},a.checkReg=function(e){a.setState({regtype:e})},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match;console.log(window.location.search.split("=")[1])}},{key:"componentWillUnmount",value:function(){window.onresize=null}},{key:"render",value:function(){var e=this,t=this.props.history,a=this.props.localeStore.locale.REGISTER,n=this.state,c=n.nickname,r=n.account,s=n.code,i=n.password,l=(n.passwordConfirm,n.recommendCode),u=n.pwType,m=(n.pwConfirmType,n.captcha,n.imgSrc,n.count),p=n.isGetSms,d=n.isSubmit,E=n.canGetCode,S=n.regtype;return g.a.createElement("div",{id:"register"},g.a.createElement(L.a,null),g.a.createElement("div",{className:"log_head"},g.a.createElement("h1",null,a.ZCXZH),g.a.createElement("p",null,a.HYZC)),g.a.createElement("div",{className:"reg_type_box"},g.a.createElement("span",{onClick:function(){e.checkReg("phone")},className:"phone"===S?"active":"no_active"},a.PHONE_REGISTER),g.a.createElement("span",{onClick:function(){e.checkReg("email")},className:"phone"===S?"no_active":"active"},a.EMAIL_REGISTER)),g.a.createElement("div",{className:"out_box"},g.a.createElement("div",{className:"main-content"},g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:A.a}),g.a.createElement("input",{className:"input-main",type:"text",value:c,placeholder:a.YHM,onBlur:function(t){return e.onNickBlur(t)},onChange:function(t){return e.onInputChange(t,"nickname")}}))),g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:"phone"===S&&x.a||D.a}),g.a.createElement("input",{className:"input-main",type:"text",value:r,placeholder:"phone"===S&&a.PHONE_NUM||a.EMAIL_NUM,onBlur:this.onAccountBlur,onChange:function(t){return e.onInputChange(t,"account")}}))),g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:R.a}),g.a.createElement("input",{className:"input-main",type:"text",maxLength:6,placeholder:a.YANZHENGMA,value:s,onChange:function(t){return e.onInputChange(t,"code")}})),g.a.createElement("span",{style:!E&&p&&{opacity:".5"}||{},className:"sms-code  ".concat(p?"":"event-none"),onClick:this.getCode},p?a.HQ_YANZHENGMA:g.a.createElement("span",null,"".concat(m,"s")))),g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:j.a}),g.a.createElement("input",{className:"input-main",type:u,value:i,placeholder:a.PLEASE_PASSWORD,onChange:function(t){return e.onInputChange(t,"password")}})),g.a.createElement("img",{className:"eye-img",src:"text"===u?y.a:O.a,alt:"\u7741\u773c\u95ed\u773c",onClick:function(){return e.onSetType(u,"pwType")}})),g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:M.a}),g.a.createElement("input",{className:"input-main",type:"text",value:l,placeholder:a.YQM+"\uff08\u975e\u5fc5\u586b\uff09",onChange:function(t){return e.onInputChange(t,"recommendCode")}})))),g.a.createElement("div",{className:"btn-box"},g.a.createElement(o.a,{activeClassName:"active",className:"primary-button",disabled:!this.canSubmit()||!d,onClick:this.onSubmit},a.NOW_REGISTER)),g.a.createElement("div",{className:"to_log"},a.HAD_ZHANGHAO," ",g.a.createElement("span",{onClick:function(){t.push("/login")}},a.HAD_ZHANGHAO2))))}}]),t}(f.Component))||n)||n)||n;t.default=B}}]);
//# sourceMappingURL=82.2e7030b5.chunk.js.map