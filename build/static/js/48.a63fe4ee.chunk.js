(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{193:function(e,t,n){"use strict";var a,o=n(194),s=n(7),i=n(8),r=n(28),c=n(27),l=n(29),g=n(1),A=n.n(g),u=n(45),p=(n(196),n(33)),h=Object(p.b)("localeStore")(a=Object(p.c)(a=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).onBack=function(){var e=n.props,t=e.history,a=e.onHandle;a?a():t.goBack&&window.history.length>1?window.history.go(-1):t.push("/home")},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;e.history,e.onHandle}},{key:"render",value:function(){var e=this.props,t=e.src;Object(o.a)(e.localeStore);var a=this.props,s=(a.msg,a.hideBack);return A.a.createElement("div",{style:this.props.style||{},className:"account-header"},A.a.createElement("img",{className:s?"hidden":"",src:t&&t||n(195),alt:"\u8fd4\u56de",onClick:this.onBack}))}}]),t}(g.Component))||a)||a;t.a=Object(u.d)(h)},195:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAIgAAAAACeqFUAAACI0lEQVRYCb2YO0gDQRRFs34bQQiCaFDwA4pCioBFRAsLtbETG3tBLGwEK1uxsrOwshRBRKwsLKwEOxUxECsRJCKGaOI/ajwTLIbNzursTDJww8x78+55O7txJaFQgFEoFJrQJnpA52gsgI1ZCdAWlEDyeGPRaeasUQ0sgpJyB9J8QcOqZGtNSUQRANhO6hCprvxTUWovTBMd6Eq6evdUPCsRe0QPJwDd6NpNltYvzEc9Su2FAPSgGwnqnj4RGLFH9HAC0I9u3WRpnWM+7FFqLwQgiu4kqHv6SCBuj+jhBCCG7t1kaZ1hPuBRai8kAEiAVCNNImaP6OEEII7EkauGuFVRj1J7IQBDSDx8qiEe2n57xFInB0CYcAI1l6aLkQ8+Z1FSkTcJpym+dBynEKKRNdUxVCh+AqdNnMgFXfWZXJaF2j3RSA6jBgtmJhbZKqrLce91m0qJRnZ1q8qwf1ncmjqMz1CvD0D8H5LxyQdNiW/NNt+ag6IBzYhXfQqpxjGJyjxHgMSLzu/P+wH5+qCXrlUHaBA9I9XYIVGtZRp0M6Bx9K7qhPgGcoL6a9UBmkJfSDVWtQxNNtPBjKqL3/iSib9WLcDFP5qZ0zI02UwjKz7NfJObNvHXqgW27tNMntyElmHQzYCq0JZPM1lyrUH9teoA1aJ9n2bmtQxdm8VL71+D90GejZPoSFFQq4iXJ8yJNKJT18m8su4qD9HHFWgYWf2h5gfF7AOA8qMQfgAAAABJRU5ErkJggg=="},196:function(e,t,n){},265:function(e,t){},266:function(e,t){},271:function(e,t,n){},509:function(e,t,n){"use strict";n.r(t);n(112);var a,o=n(72),s=n.n(o),i=(n(221),n(225)),r=n.n(i),c=n(204),l=n.n(c),g=n(203),A=n(205),u=n(0),p=(n(70),n(34)),h=n.n(p),m=n(7),f=n(8),d=n(28),v=n(27),S=n(71),b=n(29),E=n(1),O=n.n(E),j=n(33),C=(n(9),n(18)),I=(n(13),n(271),n(193)),w=(n(199),n(261),Object(j.b)("userM4DStore")(a=Object(j.b)("localeStore")(a=Object(j.c)(a=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={files:[],multiple:!1,reason:"",serviceArr:[],showBigImg:!1,bigSrc:"",imgLoading:!1,upImgArr:[],page:1,pageSize:10,hasMore:!1,isSubmit:!0,valueLength:0},n.onChange=function(e,t,a){var o=Object(S.a)(n);console.log(e,t,a);var s=n.props,i=s.userM4DStore,r=(s.history,n.state.upImgArr);if(Array.prototype.remove=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(isNaN(e)||(n=t),n==e){for(var a=t;a<this.length;a++)this[a]=this[a+1];this.length=this.length-1}}},"remove"===t){var c=r;return c.remove(a),console.log(c),void o.setState({files:e,upImgArr:c})}n.setState({files:e,imgLoading:!0}),console.log(e[e.length-1].file),C.c.uploadphoto({open_id:i.openid,file:e[e.length-1].file}).then(function(e){if(1===e.status){var t=r;t.push(e.data.fileUrl),o.setState({imgLoading:!1,upImgArr:t},function(){})}else h.a.info(e.msg,1,function(){o.setState({imgLoading:!1,files:[],upImgArr:[]})})})},n.onInputChange=function(e,t){var a=n.props.localeStore.locale.CUSTOMERSERVIXE,o=Object(S.a)(n),s=e.target.value;console.log(s),n.setState({valueLength:s.length}),s.length>200?h.a.info(a.MORE_INPUT,1,function(){o.setState({valueLength:0})}):n.setState(Object(u.a)({},t,s))},n.getAasklist=Object(A.a)(l.a.mark(function e(){var t,a,o,s,i,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.page,o=t.pageSize,s=t.serviceArr,i=n.props.userM4DStore,r=Object(S.a)(n),e.next=5,i.getUserStatus();case 5:C.c.asklist({open_id:i.openid,page:a,row:o}).then(function(e){if(1===e.status){var t=e.data.sort(function(e,t){return t.addTime-e.addTime}),n=t.length===o;return s.push.apply(s,Object(g.a)(t)),void r.setState({serviceArr:s,hasMore:n,page:n?a+1:1})}h.a.info(e.msg)});case 6:case"end":return e.stop()}},e)})),n.imgToArr=function(e){console.log(e);var t=Object(S.a)(n),a="https://dagetest.oss-cn-hongkong.aliyuncs.com/m4dfaq/1590584610.jpg|https://dagetest.oss-cn-hongkong.aliyuncs.com/m4dfaq/1590584613.jpg|https://dagetest.oss-cn-hongkong.aliyuncs.com/m4dfaq/1590584618.jpg|";console.log(a.split("|"));var o=a.split("|");o.pop(),o.map(function(e,n){return O.a.createElement("img",{onClick:function(){t.setState({bigSrc:e,showBigImg:!0})},src:e})})},n.onSubmit=function(){n.props.localeStore.locale.CUSTOMERSERVIXE;var e=n.props,t=(e.history,e.userM4DStore),a=n.state,o=a.upImgArr,s=(a.files,a.reason),i=(a.showBigImg,a.serviceArr,a.imgLoading,Object(S.a)(n));n.setState({isSubmit:!1}),console.log(s);var r="";o.map(function(e,t){r+=e+"|"}),console.log(r),C.c.ask({open_id:t.openid,content:s,img_list:r}).then(function(e){1===e.status?h.a.info(e.msg,1,function(){n.props.history.goBack()}):h.a.info(e.msg,1,function(){i.setState({isSubmit:!0})})})},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.userM4DStore,n=(e.history,this.props.localeStore.locale.CUSTOMERSERVIXE);console.log(n),t.getUserStatus(),this.getAasklist().then()}},{key:"componentWillUnmount",value:function(){window.onresize=null}},{key:"render",value:function(){var e=this,t=this.props.localeStore.locale.CUSTOMERSERVIXE,n=(this.props.history,this.state),a=n.valueLength,o=n.imgLoading,i=n.showBigImg,c=n.files,l=n.reason,g=(n.serviceArr,n.bigSrc),A=(n.hasMore,n.isSubmit),u=""===l||!A;return O.a.createElement("div",{id:"customerService"},O.a.createElement(I.a,null),O.a.createElement("div",{className:"it_title"},t.TJGD),i&&O.a.createElement("div",{onClick:function(){e.setState({showBigImg:!1,bigSrc:""})},className:"big_img"},O.a.createElement("img",{src:g})),O.a.createElement("div",{className:"reason_box"},O.a.createElement("div",{className:"reason_textarea"},O.a.createElement("textarea",{onChange:function(t){return e.onInputChange(t,"reason")},placeholder:t.PLEASE_TELL_QUE,id:"reason",value:l}),O.a.createElement("div",{className:"erbai"},a+" / 200")),O.a.createElement(r.a,{files:c,onChange:this.onChange,onImageClick:function(e,t){return console.log(e,t)},selectable:c.length<3&&!o,multiple:this.state.multiple,length:3,accept:"image/*"}),O.a.createElement("div",{className:"btn-box"},O.a.createElement(s.a,{className:"primary-button",disabled:u||o,onClick:function(){e.onSubmit()}},o&&t.UPLOADING||t.TIJIAO))))}}]),t}(E.Component))||a)||a)||a);t.default=w}}]);
//# sourceMappingURL=48.a63fe4ee.chunk.js.map