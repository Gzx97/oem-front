{"version":3,"sources":["components/partial/AccountHeader.js","assets/images/arrow-left.png","pages/user/CustomerService.js"],"names":["AccountHeader","inject","observer","onBack","_this$props","_this","props","history","onHandle","goBack","window","length","go","push","_this$props2","this","_this$props3","src","Object","C_Users_15691_Desktop_gzxProject_imeta_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__","localeStore","_this$props4","hideBack","msg","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","style","className","require","alt","onClick","Component","withRouter","module","exports","CustomerService","state","files","multiple","reason","serviceArr","showBigImg","bigSrc","imgLoading","upImgArr","page","pageSize","hasMore","isSubmit","valueLength","onChange","type","index","C_Users_15691_Desktop_gzxProject_imeta_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_14__","_this2","console","log","_this2$props","userM4DStore","Array","prototype","remove","obj","i","temp","isNaN","j","removeImgArr","setState","file","UserApi","uploadphoto","open_id","openid","then","res","status","arr","data","fileUrl","antd_mobile_lib_toast__WEBPACK_IMPORTED_MODULE_9___default","info","onInputChange","e","key","CUSTOMERSERVIXE","locale","value","target","MORE_INPUT","C_Users_15691_Desktop_gzxProject_imeta_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__","getAasklist","_callee","_this2$state","C_Users_15691_Desktop_gzxProject_imeta_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default","wrap","_context","prev","next","getUserStatus","asklist","row","sort","b","addTime","apply","C_Users_15691_Desktop_gzxProject_imeta_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_5__","stop","imgToArr","str","gzx","split","gzxArr","pop","map","item","react__WEBPACK_IMPORTED_MODULE_16___default","onSubmit","_this2$props2","_this2$state2","imgStr","ask","content","img_list","onresize","_this3","_this$state","unSubmit","id","_components_partial_AccountHeader__WEBPACK_IMPORTED_MODULE_22__","TJGD","placeholder","PLEASE_TELL_QUE","antd_mobile_lib_image_picker__WEBPACK_IMPORTED_MODULE_3___default","onImageClick","fs","selectable","accept","antd_mobile_lib_button__WEBPACK_IMPORTED_MODULE_1___default","disabled","UPLOADING","TIJIAO"],"mappings":"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","file":"static/js/48.a63fe4ee.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport \"./AccountHeader.scss\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { Toast } from \"antd-mobile\";\r\n\r\n@inject(\"localeStore\")\r\n@observer\r\nclass AccountHeader extends Component {\r\n  componentDidMount() {\r\n    const { history, onHandle } = this.props;\r\n    // console.log(history)\r\n    // console.log((window.history));\r\n  }\r\n  onBack = () => {\r\n    const { history, onHandle } = this.props;\r\n\r\n    if (onHandle) {\r\n      onHandle();\r\n      return;\r\n    }\r\n    if (!history.goBack) {\r\n      // console.log('gzxtest')\r\n      history.push(\"/home\");\r\n      return;\r\n    }\r\n    // console.log(history);\r\n    if(window.history.length>1){\r\n      window.history.go(-1);\r\n    }else{\r\n      history.push('/home')\r\n    }\r\n    // Toast.info(JSON.stringify( window.history.length), 2, () => {\r\n    //   // history.goBack()\r\n   \r\n    // });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      src,\r\n      localeStore: {\r\n        // locale: { PASSWORD }\r\n      },\r\n    } = this.props;\r\n    const { msg, hideBack } = this.props;\r\n    return (\r\n      <div style={this.props.style || {}} className=\"account-header\">\r\n        <img\r\n          className={hideBack ? \"hidden\" : \"\"}\r\n          src={(src && src) || require(\"../../assets/images/arrow-left.png\")}\r\n          alt=\"返回\"\r\n          onClick={this.onBack}\r\n        />\r\n        {/* <h1>{title}</h1> */}\r\n        {/* {msg && <p>{msg}</p>} */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(AccountHeader);\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAIgAAAAACeqFUAAACI0lEQVRYCb2YO0gDQRRFs34bQQiCaFDwA4pCioBFRAsLtbETG3tBLGwEK1uxsrOwshRBRKwsLKwEOxUxECsRJCKGaOI/ajwTLIbNzursTDJww8x78+55O7txJaFQgFEoFJrQJnpA52gsgI1ZCdAWlEDyeGPRaeasUQ0sgpJyB9J8QcOqZGtNSUQRANhO6hCprvxTUWovTBMd6Eq6evdUPCsRe0QPJwDd6NpNltYvzEc9Su2FAPSgGwnqnj4RGLFH9HAC0I9u3WRpnWM+7FFqLwQgiu4kqHv6SCBuj+jhBCCG7t1kaZ1hPuBRai8kAEiAVCNNImaP6OEEII7EkauGuFVRj1J7IQBDSDx8qiEe2n57xFInB0CYcAI1l6aLkQ8+Z1FSkTcJpym+dBynEKKRNdUxVCh+AqdNnMgFXfWZXJaF2j3RSA6jBgtmJhbZKqrLce91m0qJRnZ1q8qwf1ncmjqMz1CvD0D8H5LxyQdNiW/NNt+ag6IBzYhXfQqpxjGJyjxHgMSLzu/P+wH5+qCXrlUHaBA9I9XYIVGtZRp0M6Bx9K7qhPgGcoL6a9UBmkJfSDVWtQxNNtPBjKqL3/iSib9WLcDFP5qZ0zI02UwjKz7NfJObNvHXqgW27tNMntyElmHQzYCq0JZPM1lyrUH9teoA1aJ9n2bmtQxdm8VL71+D90GejZPoSFFQq4iXJ8yJNKJT18m8su4qD9HHFWgYWf2h5gfF7AOA8qMQfgAAAABJRU5ErkJggg==\"","import React, { Component } from 'react'\r\nimport { Icon, Toast, ImagePicker, WingBlank, SegmentedControl, Button } from 'antd-mobile'\r\nimport { inject, observer } from 'mobx-react'\r\nimport Cookies from \"js-cookie\"\r\nimport { UserApi } from '../../api'\r\nimport { TOAST_DURATION } from '../../utils/constants'\r\nimport './CustomerService.scss'\r\nimport AccountHeader from \"../../components/partial/AccountHeader\"\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport { remove } from 'fs-extra'\r\nconst data = [{\r\n  url: 'https://zos.alipayobjects.com/rmsportal/hqQWgTXdrlmVVYi.jpeg',\r\n  id: '2122',\r\n}];\r\n@inject('userM4DStore')\r\n@inject('localeStore')\r\n@observer\r\nclass CustomerService extends Component {\r\n\r\n  state = {\r\n    files: [],//文件列表\r\n    multiple: false,//是否支持多选\r\n    reason: '',//条件\r\n    serviceArr: [],//歷史記錄數組\r\n    showBigImg: false,//查看大圖\r\n    bigSrc: '',//大圖src\r\n    imgLoading: false,//上傳中\r\n    upImgArr: [],//要上傳的圖片\r\n    page: 1,\r\n    pageSize: 10,\r\n    hasMore: false,\r\n    isSubmit: true,\r\n    valueLength: 0,\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    let _this = this\r\n    const { userM4DStore, history, } = this.props\r\n    const { localeStore: { locale: { CUSTOMERSERVIXE } } } = this.props;\r\n      console.log(CUSTOMERSERVIXE)\r\n    // if (!userM4DStore.isOnline()) {\r\n    //   Toast.info('請先登錄', 1, () => history.push('/login'))\r\n    //   return\r\n    // }\r\n    userM4DStore.getUserStatus()\r\n    // console.log(userM4DStore.openid)\r\n    this.getAasklist().then()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.onresize = null\r\n  }\r\n  // 上傳图片\r\n  onChange = (files, type, index) => {\r\n    let _this = this\r\n    console.log(files, type, index);\r\n    const { userM4DStore, history, } = this.props\r\n    const { upImgArr } = this.state\r\n\r\n    //删除数组指定下标或指定对象\r\n    Array.prototype.remove = function (obj) {\r\n      for (let i = 0; i < this.length; i++) {\r\n        let temp = this[i];\r\n        if (!isNaN(obj)) {\r\n          temp = i;\r\n        }\r\n        if (temp == obj) {\r\n          for (let j = i; j < this.length; j++) {\r\n            this[j] = this[j + 1];\r\n          }\r\n          this.length = this.length - 1;\r\n        }\r\n      }\r\n    }\r\n    if (type === 'remove') {\r\n      let removeImgArr = upImgArr\r\n      removeImgArr.remove(index)\r\n      console.log(removeImgArr)\r\n      _this.setState({\r\n        files: files,\r\n        upImgArr: removeImgArr\r\n      })\r\n      return\r\n    }\r\n    this.setState({\r\n      files: files,\r\n      imgLoading: true,\r\n    })\r\n    console.log(files[files.length - 1].file )\r\n    UserApi.uploadphoto({ open_id: userM4DStore.openid, file: files[files.length - 1].file }).then(res => {\r\n      if (res.status !== 1) {\r\n        Toast.info(res.msg, 1, () => {\r\n          _this.setState({\r\n            imgLoading: false,\r\n            files: [],\r\n            upImgArr: [],\r\n          })\r\n        })\r\n        return\r\n      }\r\n      let arr = upImgArr\r\n      arr.push(res.data.fileUrl)\r\n      _this.setState({\r\n        imgLoading: false,\r\n        upImgArr: arr\r\n      }, () => {\r\n        // console.log(upImgArr)\r\n      })\r\n      // console.log(arr)\r\n    })\r\n\r\n  }\r\n  // 文字\r\n  onInputChange = (e, key) => {\r\n    const { localeStore: { locale: { CUSTOMERSERVIXE } } } = this.props;\r\n    let _this = this\r\n    const { value } = e.target\r\n    console.log(value)\r\n    this.setState({\r\n      valueLength: value.length\r\n    })\r\n    if (value.length > 200) {\r\n      Toast.info(CUSTOMERSERVIXE.MORE_INPUT, 1, () => {\r\n        _this.setState({\r\n          valueLength: 0,\r\n        })\r\n      })\r\n      return\r\n    }\r\n    this.setState({ [key]: value })\r\n  }\r\n  // 获取客服回復\r\n  getAasklist = async () => {\r\n    const { page, pageSize, serviceArr } = this.state\r\n    const { userM4DStore } = this.props\r\n    let _this = this\r\n    await userM4DStore.getUserStatus()\r\n    UserApi.asklist({\r\n      open_id: userM4DStore.openid,\r\n      page: page,\r\n      row: pageSize,\r\n    }).then(res => {\r\n      if (res.status === 1) {\r\n        const arr = res.data.sort((a, b) => b.addTime - a.addTime)\r\n        const hasMore = arr.length === pageSize\r\n        serviceArr.push(...arr)\r\n        _this.setState({ serviceArr, hasMore, page: hasMore ? page + 1 : 1 })\r\n        return\r\n      }\r\n      Toast.info(res.msg)\r\n    })\r\n  }\r\n\r\n  // 格式化圖片\r\n  imgToArr = (str) => {\r\n    console.log(str)\r\n    let _this = this\r\n    let gzx = 'https://dagetest.oss-cn-hongkong.aliyuncs.com/m4dfaq/1590584610.jpg|https://dagetest.oss-cn-hongkong.aliyuncs.com/m4dfaq/1590584613.jpg|https://dagetest.oss-cn-hongkong.aliyuncs.com/m4dfaq/1590584618.jpg|'\r\n    console.log(gzx.split('|'))\r\n    let gzxArr = gzx.split('|')\r\n    gzxArr.pop()\r\n    gzxArr.map((item, index) => {\r\n      return (\r\n        <img\r\n          onClick={() => {\r\n            _this.setState({\r\n              bigSrc: item,\r\n              showBigImg: true,\r\n            })\r\n          }}\r\n          src={item} />\r\n      )\r\n    })\r\n  }\r\n  // gzxtest = () => {//测试事件\r\n\r\n  // }\r\n  //提交問題\r\n  onSubmit = () => {\r\n    const { localeStore: { locale: { CUSTOMERSERVIXE } } } = this.props;\r\n    const { history, userM4DStore } = this.props;\r\n    const { upImgArr, files, reason, showBigImg, serviceArr, imgLoading } = this.state;\r\n    let _this = this;\r\n    this.setState({ isSubmit: false })\r\n    console.log(reason)\r\n    // console.log(upImgArr)\r\n    let imgStr = ''\r\n    upImgArr.map((item, index) => {\r\n      imgStr += item + '|'\r\n    })\r\n    console.log(imgStr)\r\n    // console.log(imgStr.split('|'))\r\n    UserApi.ask({ open_id: userM4DStore.openid, content: reason, img_list: imgStr }).then(res => {\r\n      if (res.status !== 1) {\r\n        Toast.info(res.msg, 1, () => {\r\n          _this.setState({\r\n            isSubmit: true\r\n          })\r\n        })\r\n        return\r\n      }\r\n      Toast.info(res.msg, 1, () => {\r\n        this.props.history.goBack()\r\n      })\r\n    })\r\n\r\n  }\r\n  render() {\r\n    const { localeStore: { locale: { CUSTOMERSERVIXE } } } = this.props;\r\n    const { history } = this.props;\r\n    const { valueLength, imgLoading, showBigImg, files, reason, serviceArr, bigSrc, hasMore, isSubmit } = this.state;\r\n    const unSubmit = reason === '' || !isSubmit;\r\n    return (\r\n      <div id=\"customerService\">\r\n        <AccountHeader />\r\n        <div className='it_title'>{CUSTOMERSERVIXE.TJGD}</div>\r\n        {showBigImg &&\r\n          <div onClick={() => {\r\n            this.setState({\r\n              showBigImg: false,\r\n              bigSrc: '',\r\n            })\r\n          }} className='big_img'>\r\n            <img src={bigSrc} />\r\n          </div>\r\n        }\r\n\r\n        <div className='reason_box'>\r\n          <div className='reason_textarea'>\r\n            <textarea\r\n              onChange={e => this.onInputChange(e, 'reason')}\r\n              placeholder={CUSTOMERSERVIXE.PLEASE_TELL_QUE}\r\n              id='reason'\r\n              value={reason}>\r\n\r\n            </textarea>\r\n            <div className='erbai'>{valueLength + ' / 200'}</div>\r\n          </div>\r\n\r\n          <ImagePicker\r\n            files={files}\r\n            onChange={this.onChange}\r\n            onImageClick={(index, fs) => console.log(index, fs)}\r\n            selectable={files.length < 3 && !imgLoading}\r\n            multiple={this.state.multiple}\r\n            length={3}\r\n            // accept=\"image/png,image/gif,image/jpeg,image/jpg,\"\r\n            accept=\"image/*\"\r\n          />\r\n          <div className=\"btn-box\">\r\n            <Button\r\n              // activeClassName=\"active\"\r\n              className=\"primary-button\"\r\n              disabled={unSubmit || imgLoading}\r\n              onClick={() => { this.onSubmit() }}>\r\n              {imgLoading &&\r\n                CUSTOMERSERVIXE.UPLOADING || CUSTOMERSERVIXE.TIJIAO\r\n              }\r\n\r\n            </Button>\r\n          </div>\r\n        </div>\r\n    \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CustomerService\r\n"],"sourceRoot":""}