(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{252:function(e,t,a){},468:function(e,t,a){"use strict";a.r(t);a(112);var n,c=a(72),o=a.n(c),s=a(204),r=a.n(s),i=a(205),l=(a(70),a(34)),u=a.n(l),p=a(0),m=a(7),d=a(8),S=a(28),E=a(27),f=a(71),h=a(29),b=a(1),g=a.n(b),v=a(33),C=(a(9),a(18)),w=a(13),N=a(78),y=a(214),O=a.n(y),A=a(215),R=a.n(A),_=(a(219),a(237)),k=a.n(_),G=a(238),x=a.n(G),P=a(220),j=a.n(P),I=(a(239),a(244)),M=a.n(I),T=(a(252),a(193)),D=Object(v.b)("userM4DStore")(n=Object(v.b)("localeStore")(n=Object(v.c)(n=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={regtype:"phone",account_token:"",step:1,agree:!1,nickname:"",preAccount:"",account:"",code:"",imgCode:"",password:"",passwordConfirm:"",recommendCode:"",showCaptchaPng:!1,pwType:"password",pwConfirmType:"password",imgSrc:"",captcha:void 0,captchaKey:+new Date,count:w.c,isGetSms:!0,showBtn:!0,isSubmit:!0,isSuccessToast:!1,regType:"email",tel_num:"",canGetCode:!0},a.canSubmit=function(){var e=a.state,t=e.account,n=e.code,c=e.password,o=e.passwordConfirm;e.nickname;return!!(t&&n&&c&&o)},a.onInputChange=function(e,t){var n=e.target.value;a.setState(Object(p.a)({},t,n))},a.onAccountBlur=function(e){var t=Object(f.a)(a),n=e.target.value,c=a.state,o=(c.canGetCode,c.preAccount),s=c.account,r=c.regtype,i=a.props.localeStore.locale.PASSWORD;return n!==o&&a.setState({preAccount:n}),("phone"!==r||Object(N.c)(s))&&("email"!==r||Object(N.a)(s))?void 0:(u.a.info(i.PLEASE_RIGHT_NUMBER,1),void t.setState({canGetCode:!0}))},a.codeCountDown=function(){var e=a.state.count;a.timer=setInterval(function(){e<=0?(a.setState({isGetSms:!0,count:w.c}),a.setState({canGetCode:!0}),clearInterval(a.timer)):a.setState({isGetSms:!1,count:e--})},1e3)},a.getCode=Object(i.a)(r.a.mark(function e(){var t,n,c,o,s,i,l,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.userM4DStore,n=a.props.localeStore.locale,n.REGISTER,c=n.PASSWORD,o=Object(f.a)(a),s=a.state,i=s.canGetCode,l=s.account,s.captcha,s.imgCode,p=s.regtype,e.next=6,o.setState({canGetCode:!1});case 6:if(i){e.next=8;break}return e.abrupt("return");case 8:if("phone"!==p){e.next=13;break}if(Object(N.c)(l)){e.next=13;break}return u.a.info(c.PLEASE_RIGHT_NUMBER,1),o.setState({canGetCode:!0}),e.abrupt("return");case 13:if("email"!==p){e.next=18;break}if(Object(N.a)(l)){e.next=18;break}return u.a.info(c.PLEASE_RIGHT_NUMBER,1),o.setState({canGetCode:!0}),e.abrupt("return");case 18:t.getCode({account:l,type:"findpassword "}).then(function(e){if(1!==e.status)return u.a.info(e.msg),void o.setState({canGetCode:!0});a.codeCountDown()});case 19:case"end":return e.stop()}},e)})),a.onSetType=function(e,t){var n="password"===e?"text":"password";a.setState(Object(p.a)({},t,n))},a.onSubmit=function(){var e=a.props,t=(e.userM4DStore,e.history),n=a.props.localeStore.locale.REGISTER,c=a.state,o=c.account,s=c.code,r=c.password,i=c.passwordConfirm,l=c.regtype;w.d.EMAIL.test(o)||w.d.MOBILE.test(o)?w.d.PASSWORD.test(r)?r===i?(a.setState({isSubmit:!1}),C.c.findPassword({usertype:l,email:Object(N.a)(o)?o:null,phone:Object(N.c)(o)?o:null,code:s,password:r,passwordConfirm:i}).then(function(e){if(a.setState({isSubmit:!0}),1!==e.status)return u.a.info(e.msg,2),void a.setState({isSubmit:!0,code:"",captcha:""});u.a.info(e.msg,2,function(){t.push("/login")})}).catch(function(){return a.setState({isSubmit:!0})})):u.a.info(n.PASSWORD_NOSAME,2):u.a.info(n.PASSWORD_LEAST,2):u.a.info(n.NUM_ERROR,2)},a.checkReg=function(e){a.setState({regtype:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match}},{key:"componentWillUnmount",value:function(){window.onresize=null}},{key:"render",value:function(){var e=this,t=(this.props.history,this.props.localeStore.locale),a=t.REGISTER,n=t.PASSWORD,c=this.state,s=c.account,r=c.code,i=c.password,l=c.passwordConfirm,u=c.pwType,p=c.pwConfirmType,m=c.count,d=c.isGetSms,S=c.isSubmit,E=c.regtype,f=c.canGetCode;return g.a.createElement("div",{id:"password"},g.a.createElement(T.a,null),g.a.createElement("div",{className:"log_head"},g.a.createElement("h1",null,n.ZHAOHUI_PASSWORD),g.a.createElement("p",null,n.TIPS)),g.a.createElement("div",{className:"reg_type_box"},g.a.createElement("span",{onClick:function(){e.checkReg("phone")},className:"phone"===E?"active":"no_active"},n.PHONE_NUM),g.a.createElement("span",{onClick:function(){e.checkReg("email")},className:"phone"===E?"no_active":"active"},n.EMAIL_NUM)),g.a.createElement("div",{className:"out_box"},g.a.createElement("div",{className:"main-content"},g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:"phone"===E&&x.a||M.a}),g.a.createElement("input",{className:"input-main",type:"text",value:s,placeholder:"phone"===E&&n.PHONE_NUM||n.EMAIL_NUM,onBlur:this.onAccountBlur,onChange:function(t){return e.onInputChange(t,"account")}}))),g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:k.a}),g.a.createElement("input",{className:"input-main",type:"text",maxLength:6,placeholder:n.PLEASE_YZM,value:r,onChange:function(t){return e.onInputChange(t,"code")}})),g.a.createElement("span",{style:!f&&d&&{opacity:".5"}||{},className:"sms-code  ".concat(d?"":"event-none"),onClick:this.getCode},d?n.HQ_YANZHENGMA:g.a.createElement("span",null,"".concat(m,"s")))),g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:j.a}),g.a.createElement("input",{className:"input-main",type:u,value:i,placeholder:a.PLEASE_PASSWORD,onChange:function(t){return e.onInputChange(t,"password")}})),g.a.createElement("img",{className:"eye-img",src:"text"===u?O.a:R.a,alt:"\u7741\u773c\u95ed\u773c",onClick:function(){return e.onSetType(u,"pwType")}})),g.a.createElement("label",null,g.a.createElement("div",{className:"input-box"},g.a.createElement("img",{className:"icon-img",src:j.a}),g.a.createElement("input",{className:"input-main",type:p,value:l,placeholder:a.PLEASE_PASSWORD2,onChange:function(t){return e.onInputChange(t,"passwordConfirm")}})),g.a.createElement("img",{className:"eye-img",src:"text"===p?O.a:R.a,alt:"\u7741\u773c\u95ed\u773c",onClick:function(){return e.onSetType(p,"pwConfirmType")}}))),g.a.createElement("div",{className:"btn-box"},g.a.createElement(o.a,{activeClassName:"active",className:"primary-button",disabled:!this.canSubmit()||!S,onClick:this.onSubmit},n.OK))))}}]),t}(b.Component))||n)||n)||n;t.default=D}}]);
//# sourceMappingURL=80.270244c7.chunk.js.map